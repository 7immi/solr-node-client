<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Code Documentation for lib/solr.js - Solr client for node.js</title>
    <script type="text/javascript">
      var ghuser = 'lbdremy'
        , ghproject = 'solr-node-client';
    </script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="/solr-node-client/public/js/jq-mousewheel.js"></script>
    <script src="/solr-node-client/public/js/antiscroll.js"></script>
    <script src="/solr-node-client/public/js/prettify.js"></script>
    <script src="/solr-node-client/public/js/main.js"></script>
    <link rel="stylesheet" href="/solr-node-client/public/css/antiscroll.css" type="text/css" media="all">
    <link rel="stylesheet" href="/solr-node-client/public/css/main.css" type="text/css" media="all">
    <link href="http://fonts.googleapis.com/css?family=Lato:300|Quicksand" rel="stylesheet" type="text/css">
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-30298936-1']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </head>
  <body><a href="https://github.com/lbdremy/solr-node-client" alt="fork the solr client for node.js on github" target="_blank"><img id="githubfork" src="/solr-node-client/public/img/github_fork.png"></a>
    <nav>
      <ul class="pages">
        <li><a href="/solr-node-client">Home</a></li>
      </ul>
      <ul class="code">
        <li class="header"><a href="/solr-node-client/code/">Code Documentation</a></li>
        <li><a href="/solr-node-client/code/query.js.html">lib/query.js</a></li>
        <li><a href="/solr-node-client/code/format.js.html">lib/utils/format.js</a></li>
        <li><a href="/solr-node-client/code/solr-error.js.html">lib/error/solr-error.js</a></li>
        <li><a href="/solr-node-client/code/solr.js.html">lib/solr.js</a></li>
      </ul>
      <ul class="code">
        <li style="font-family:&quot;Lato&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;color:#666;font-size:14px" class="header">examples</li>
        <li><a href="/solr-node-client/code/get.js.html">get.js</a></li>
        <li><a href="/solr-node-client/code/add.js.html">add.js</a></li>
        <li><a href="/solr-node-client/code/addRemoteResource.js.html">addRemoteResource.js</a></li>
        <li><a href="/solr-node-client/code/createAddStream.js.html">createAddStream.js</a></li>
        <li><a href="/solr-node-client/code/basicAuth.js.html">basicAuth.js</a></li>
        <li><a href="/solr-node-client/code/commit.js.html">commit.js</a></li>
        <li><a href="/solr-node-client/code/delete.js.html">delete.js</a></li>
        <li><a href="/solr-node-client/code/deleteByQuery.js.html">deleteByQuery.js</a></li>
        <li><a href="/solr-node-client/code/deleteByID.js.html">deleteByID.js</a></li>
        <li><a href="/solr-node-client/code/optimize.js.html">optimize.js</a></li>
        <li><a href="/solr-node-client/code/ping.js.html">ping.js</a></li>
        <li><a href="/solr-node-client/code/search.js.html">search.js</a></li>
        <li><a href="/solr-node-client/code/rollback.js.html">rollback.js</a></li>
        <li><a href="/solr-node-client/code/spell.js.html">spell.js</a></li>
        <li><a href="/solr-node-client/code/realTimeGet.js.html">realTimeGet.js</a></li>
        <li><a href="/solr-node-client/code/prepareCommit.js.html">prepareCommit.js</a></li>
        <li><a href="/solr-node-client/code/softCommit.js.html">softCommit.js</a></li>
        <li><a href="/solr-node-client/code/deleteByRange.js.html">deleteByRange.js</a></li>
      </ul>
    </nav>
    <header>
      <h1> Solr client for node.js</h1>
      <div class="description">A solr client for <b>indexing</b>, <b>adding</b>, <b>deleting</b>,<b>committing</b> and <b>searching</b> documents within an <a href="http://lucene.apache.org/solr/">Apache Solr</a> installation (version>=3.2).</div>
      <div class="gh">
        <h4>Latest Update from Github</h4>
        <div id="commit"><span id="latestCommitTime">Loading...</span><a id="latestCommitURL"></a></div>
        <div id="latestCommitMessage">Loading...</div>
        <div id="buttons">
          <div class="btn">
            <iframe src="http://ghbtns.com/github-btn.html?user=lbdremy&amp;repo=solr-node-client&amp;type=watch&amp;count=true" allowtransparency="true" frameborder="0" scrolling="0" width="110px" height="20px"></iframe>
          </div>
          <div class="btn">
            <iframe src="http://ghbtns.com/github-btn.html?user=lbdremy&amp;repo=solr-node-client&amp;type=fork&amp;count=true" allowtransparency="true" frameborder="0" scrolling="0" width="110px" height="20px"></iframe>
          </div>
          <div class="btn"><a href="htts://twitter.com/share" data-via="lbdremy" data-url="http://lbdremy.github.com/solr-node-client" data-related="lbdremy" class="twitter-share-button">Tweet</a>
            <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
          </div>
        </div>
        <div id="links"><a id="repoIssues" href="https://github.com/lbdremy/solr-node-client/issues">GitHub Issues</a>
        </div>
      </div>
    </header>
    <section id="content">
      <div id="code">
        <article class="codeblock">
          <div class="header"><p>Load dependencies</p>
</div>
          <div class="ctx">
            <h3>http</h3>
          </div>
          <div class="description"></div>
          <div class="view-source">Hide Source</div>
          <div class="code-wrap">
            <pre class="source prettyprint"><code>var http = require('http'),
   https = require('https'),
   Query = require('./query'),
   querystring = require('querystring'),
   format = require('./utils/format'),
   SolrError = require('./error/solr-error'),
   JSONStream = require('JSONStream'),
   duplexer = require('duplexer'),
   request = require('request'),
   JSONbig = require('json-bigint');</code></pre>
          </div>
        </article>
        <article class="codeblock">
          <div class="header"><p>Expose <code>createClient()</code>.</p>
</div>
          <div class="ctx">
            <h3>exports.createClient</h3>
          </div>
          <div class="description"></div>
          <div class="view-source">Hide Source</div>
          <div class="code-wrap">
            <pre class="source prettyprint"><code>exports.createClient = createClient;</code></pre>
          </div>
        </article>
        <article class="codeblock">
          <div class="header"><p>Create an instance of <code>Client</code></p>
</div>
          <div class="ctx">
            <h3>createClient()</h3>
          </div>
          <div class="tags">
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; String | Object &#125;</span><span class="name">[host='127.0.0.1']</span><span class="desc">- IP address or host address of the Solr server</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Number | String &#125;</span><span class="name">[port='8983']</span><span class="desc">- port of the Solr server</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; String &#125;</span><span class="name">[core='']</span><span class="desc">- name of the Solr core requested</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; String &#125;</span><span class="name">[path='/solr']</span><span class="desc">- root path of all requests</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; http.Agent &#125;</span><span class="name">[agent]</span><span class="desc">- HTTP Agent which is used for pooling sockets used in HTTP(s) client requests</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Boolean &#125;</span><span class="name">[secure=false]</span><span class="desc">- if true HTTPS will be used instead of HTTP</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Boolean &#125;</span><span class="name">[bigint=false]</span><span class="desc">- if true JSONbig serializer/deserializer will be used instead</span></div>
            <div class="tag"><span class="type">&#64;return</span><span class="desc">Client</span></div>
            <div class="tag"><span class="type">&#64;api</span><span class="visibility">public</span></div>
          </div>
          <div class="description"></div>
          <div class="view-source">Hide Source</div>
          <div class="code-wrap">
            <pre class="source prettyprint"><code>function createClient(host, port, core, path, agent, secure, bigint){
  var options = (typeof host === 'object') ? host : {
      host : host,
      port : port,
      core : core,
      path : path,
      agent : agent,
      secure : secure,
      bigint : bigint
   };
  return new Client(options);
}</code></pre>
          </div>
        </article>
        <article class="codeblock">
          <div class="header"><p>Solr client</p>
</div>
          <div class="ctx">
            <h3>Client()</h3>
          </div>
          <div class="tags">
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Object &#125;</span><span class="name">options</span><span class="desc">- set of options used to request the Solr server</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; String &#125;</span><span class="name">options.host</span><span class="desc">- IP address or host address of the Solr server</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Number | String &#125;</span><span class="name">options.port</span><span class="desc">- port of the Solr server</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; String &#125;</span><span class="name">options.core</span><span class="desc">- name of the Solr core requested</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; String &#125;</span><span class="name">options.path</span><span class="desc">- root path of all requests</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; http.Agent &#125;</span><span class="name">[options.agent]</span><span class="desc">- HTTP Agent which is used for pooling sockets used in HTTP(s) client requests</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Boolean &#125;</span><span class="name">[options.secure=false]</span><span class="desc">- if true HTTPS will be used instead of HTTP</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Boolean &#125;</span><span class="name">[options.bigint=false]</span><span class="desc">- if true JSONbig serializer/deserializer will be used instead</span></div>
            <div class="tag"><span class="type">&#64;return</span><span class="desc">Client</span></div>
            <div class="tag"><span class="type">&#64;api</span><span class="visibility">private</span></div>
          </div>
          <div class="description"></div>
          <div class="view-source">Hide Source</div>
          <div class="code-wrap">
            <pre class="source prettyprint"><code>function Client(options){
   this.options = {
      host : options.host || '127.0.0.1',
      port : options.port || '8983',
      core : options.core || '',
      path : options.path || '/solr',
      agent : options.agent,
      secure : options.secure || false,
      bigint : options.bigint || false
   };

   // Default paths of all request handlers
   this.UPDATE_JSON_HANDLER = 'update/json';
   this.UPDATE_HANDLER = 'update';
   this.SELECT_HANDLER = 'select';
   this.ADMIN_PING_HANDLER = 'admin/ping';
   this.REAL_TIME_GET_HANDLER = 'get';
   this.SPELL_HANDLER = 'spell';
}</code></pre>
          </div>
        </article>
        <article class="codeblock">
          <div class="header"><p>Create credential using the basic access authentication method</p>
</div>
          <div class="ctx">
            <h3>Client.prototype.basicAuth()</h3>
          </div>
          <div class="tags">
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; String &#125;</span><span class="name">username</span><span class="desc"></span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; String &#125;</span><span class="name">password</span><span class="desc"></span></div>
            <div class="tag"><span class="type">&#64;return</span><span class="desc">Client</span></div>
            <div class="tag"><span class="type">&#64;api</span><span class="visibility">public</span></div>
          </div>
          <div class="description"></div>
          <div class="view-source">Hide Source</div>
          <div class="code-wrap">
            <pre class="source prettyprint"><code>Client.prototype.basicAuth = function(username,password){
   var self = this;
   this.options.authorization = 'Basic ' + new Buffer(username + ':' + password).toString('base64');
   return self;
}</code></pre>
          </div>
        </article>
        <article class="codeblock">
          <div class="header"><p>Remove authorization header</p>
</div>
          <div class="ctx">
            <h3>Client.prototype.unauth()</h3>
          </div>
          <div class="tags">
            <div class="tag"><span class="type">&#64;return</span><span class="desc">Client</span></div>
            <div class="tag"><span class="type">&#64;api</span><span class="visibility">public</span></div>
          </div>
          <div class="description"></div>
          <div class="view-source">Hide Source</div>
          <div class="code-wrap">
            <pre class="source prettyprint"><code>Client.prototype.unauth = function(){
   var self = this;
   delete this.options.authorization;
   return self;
}</code></pre>
          </div>
        </article>
        <article class="codeblock">
          <div class="header"><p>Add a document or a list of documents</p>
</div>
          <div class="ctx">
            <h3>Client.prototype.add()</h3>
          </div>
          <div class="tags">
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Object | Array &#125;</span><span class="name">doc</span><span class="desc">- document or list of documents to add into the Solr database</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Object &#125;</span><span class="name">[options]</span><span class="desc">-</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Function &#125;</span><span class="name">callback(err,obj)</span><span class="desc">- a function executed when the Solr server responds or an error occurs</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Error &#125;</span><span class="name">callback().err</span><span class="desc"></span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Object &#125;</span><span class="name">callback().obj</span><span class="desc">- JSON response sent by the Solr server deserialized</span></div>
            <div class="tag"><span class="type">&#64;return</span><span class="desc">http.ClientRequest</span></div>
            <div class="tag"><span class="type">&#64;api</span><span class="visibility">public</span></div>
          </div>
          <div class="description"></div>
          <div class="view-source">Hide Source</div>
          <div class="code-wrap">
            <pre class="source prettyprint"><code>Client.prototype.add = function(docs,options,callback){
   if(typeof(options) === 'function'){
      callback = options;
      options = {};
   }
   docs = format.dateISOify(docs); // format `Date` object into string understable for Solr as a date.
   docs = Array.isArray(docs) ? docs : [docs];
   return this.update(docs,options,callback);
}</code></pre>
          </div>
        </article>
        <article class="codeblock">
          <div class="header"><p>Get a document by id or a list of documents by ids using the Real-time-get feature
 in SOLR4 (<a href="https://wiki.apache.org/solr/RealTimeGet">https://wiki.apache.org/solr/RealTimeGet</a>)</p>
</div>
          <div class="ctx">
            <h3>Client.prototype.realTimeGet()</h3>
          </div>
          <div class="tags">
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; String | Array &#125;</span><span class="name">ids</span><span class="desc">- id or list of ids that identify the documents to get</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Query | Object | String &#125;</span><span class="name">[query]</span><span class="desc">-</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Function &#125;</span><span class="name">callback(err,obj)</span><span class="desc">- a function executed when the Solr server responds or an error occurs</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Error &#125;</span><span class="name">callback().err</span><span class="desc"></span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Object &#125;</span><span class="name">callback().obj</span><span class="desc">- JSON response sent by the Solr server deserialized</span></div>
            <div class="tag"><span class="type">&#64;return</span><span class="desc">http.ClientRequest</span></div>
            <div class="tag"><span class="type">&#64;api</span><span class="visibility">public</span></div>
          </div>
          <div class="description"></div>
          <div class="view-source">Hide Source</div>
          <div class="code-wrap">
            <pre class="source prettyprint"><code>Client.prototype.realTimeGet = function(ids, query, callback){
   if(typeof query === 'function'){
      callback = query;
      query = {};
   }
   ids = Array.isArray(ids) ? ids : [ids];
   query.ids = ids.join(',');

   return this.get(this.REAL_TIME_GET_HANDLER,query,callback);
}</code></pre>
          </div>
        </article>
        <article class="codeblock">
          <div class="header"><p>Add the remote resource located at the given path <code>options.path</code> into the Solr database.</p>
</div>
          <div class="ctx">
            <h3>Client.prototype.addRemoteResource()</h3>
          </div>
          <div class="tags">
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Object &#125;</span><span class="name">options</span><span class="desc">-</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; String &#125;</span><span class="name">options.path</span><span class="desc">- path of the file. HTTP URL, the full path or a path relative to the CWD of the running solr server must be used.</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; String &#125;</span><span class="name">[options.format='xml']</span><span class="desc">- format of the resource. XML, CSV or JSON formats must be used.</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; String &#125;</span><span class="name">[options.contentType='text/plain;charset=utf-8']</span><span class="desc">- content type of the resource</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Object &#125;</span><span class="name">[options.parameters]</span><span class="desc">- set of extras parameters pass along in the query.</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Function &#125;</span><span class="name">callback(err,obj)</span><span class="desc">- a function executed when the Solr server responds or an error occurs</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Error &#125;</span><span class="name">callback().err</span><span class="desc"></span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Object &#125;</span><span class="name">callback().obj</span><span class="desc">- JSON response sent by the Solr server deserialized</span></div>
            <div class="tag"><span class="type">&#64;return</span><span class="desc">http.ClientRequest</span></div>
            <div class="tag"><span class="type">&#64;api</span><span class="visibility">public</span></div>
          </div>
          <div class="description"></div>
          <div class="view-source">Hide Source</div>
          <div class="code-wrap">
            <pre class="source prettyprint"><code>Client.prototype.addRemoteResource = function(options,callback){
   options.parameters = options.parameters || {};
   options.format = (options.format === 'xml' ? '' : options.format || ''); // reason: the default route of the XmlUpdateRequestHandle is /update and not /update/xml.
   options.parameters.commit = (options.parameters.commit === undefined ? false : options.parameters.commit);
   options.parameters['stream.contentType'] = options.contentType || 'text/plain;charset=utf-8';
   if(options.path.match(/^https?:\/\//)){
      options.parameters['stream.url'] = options.path;
   }else{
      options.parameters['stream.file'] = options.path;
   }

   var handler = this.UPDATE_HANDLER + '/' + options.format.toLowerCase();
   var query = querystring.stringify(options.parameters);
   return this.get(handler,query,callback);
}</code></pre>
          </div>
        </article>
        <article class="codeblock">
          <div class="header"><p>Create a writable/readable <code>Stream</code> to add documents into the Solr database</p>
</div>
          <div class="ctx">
            <h3>Client.prototype.createAddStream()</h3>
          </div>
          <div class="tags">
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Object &#125;</span><span class="name">[options]</span><span class="desc">-</span></div>
            <div class="tag"><span class="type">&#64;return</span><span class="desc">Stream</span></div>
            <div class="tag"><span class="type">&#64;api</span><span class="visibility">public</span></div>
          </div>
          <div class="description"></div>
          <div class="view-source">Hide Source</div>
          <div class="code-wrap">
            <pre class="source prettyprint"><code>Client.prototype.createAddStream = function(options){
   var path = [this.options.path,this.options.core, this.UPDATE_JSON_HANDLER + '?' + querystring.stringify(options) +'&amp;wt=json']
      .filter(function(element){
         return element;
      })
      .join('/');
   var headers = {
      'content-type' : 'application/json',
      'charset' : 'utf-8'
   };
   if(this.options.authorization){
      headers['authorization'] = this.options.authorization;
   }
   var protocol = this.options.secure ? 'https' : 'http';
   var optionsRequest = {
      url : protocol + '://' + this.options.host +':' + this.options.port + path ,
      method : 'POST',
      headers : headers
   };
   var jsonStreamStringify = JSONStream.stringify();
   var postRequest = request(optionsRequest);
   jsonStreamStringify.pipe(postRequest);
   var duplex = duplexer(jsonStreamStringify,postRequest);
   return duplex ;
}</code></pre>
          </div>
        </article>
        <article class="codeblock">
          <div class="header"><p>Commit last added and removed documents, that means your documents are now indexed.</p>
</div>
          <div class="ctx">
            <h3>Client.prototype.commit()</h3>
          </div>
          <div class="tags">
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Object &#125;</span><span class="name">options</span><span class="desc"></span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Function &#125;</span><span class="name">callback(err,obj)</span><span class="desc">- a function executed when the Solr server responds or an error occurs</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Error &#125;</span><span class="name">callback().err</span><span class="desc"></span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Object &#125;</span><span class="name">callback().obj</span><span class="desc">- JSON response sent by the Solr server deserialized</span></div>
            <div class="tag"><span class="type">&#64;return</span><span class="desc">http.ClientRequest</span></div>
            <div class="tag"><span class="type">&#64;api</span><span class="visibility">public</span></div>
          </div>
          <div class="description"></div>
          <div class="view-source">Hide Source</div>
          <div class="code-wrap">
            <pre class="source prettyprint"><code>Client.prototype.commit = function(options,callback){
   if(typeof(options) === 'function'){
      callback = options;
      options = {};
   }
   var data = {
      commit : options || {}
   };
   return this.update(data,callback);
}</code></pre>
          </div>
        </article>
        <article class="codeblock">
          <div class="header"><p>Call Lucene&#39;s IndexWriter.prepareCommit, the changes won&#39;t be visible in the index.</p>
</div>
          <div class="ctx">
            <h3>Client.prototype.prepareCommit()</h3>
          </div>
          <div class="tags">
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Function &#125;</span><span class="name">callback(err,obj)</span><span class="desc">- a function executed when the Solr server responds or an error occurs</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Error &#125;</span><span class="name">callback().err</span><span class="desc"></span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Object &#125;</span><span class="name">callback().obj</span><span class="desc">- JSON response sent by the Solr server deserialized</span></div>
            <div class="tag"><span class="type">&#64;return</span><span class="desc">http.ClientRequest</span></div>
            <div class="tag"><span class="type">&#64;api</span><span class="visibility">public</span></div>
          </div>
          <div class="description"></div>
          <div class="view-source">Hide Source</div>
          <div class="code-wrap">
            <pre class="source prettyprint"><code>Client.prototype.prepareCommit = function(callback){
   return this.update({},{ prepareCommit : true},callback);
}</code></pre>
          </div>
        </article>
        <article class="codeblock">
          <div class="header"><p>Soft commit all changes</p>
</div>
          <div class="ctx">
            <h3>Client.prototype.softCommit()</h3>
          </div>
          <div class="tags">
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Function &#125;</span><span class="name">callback(err,obj)</span><span class="desc">- a function executed when the Solr server responds or an error occurs</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Error &#125;</span><span class="name">callback().err</span><span class="desc"></span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Object &#125;</span><span class="name">callback().obj</span><span class="desc">- JSON response sent by the Solr server deserialized</span></div>
            <div class="tag"><span class="type">&#64;return</span><span class="desc">http.ClientRequest</span></div>
            <div class="tag"><span class="type">&#64;api</span><span class="visibility">public</span></div>
          </div>
          <div class="description"></div>
          <div class="view-source">Hide Source</div>
          <div class="code-wrap">
            <pre class="source prettyprint"><code>Client.prototype.softCommit = function(callback){
   return this.update({},{ softCommit : true},callback);
}</code></pre>
          </div>
        </article>
        <article class="codeblock">
          <div class="header"><p>Delete documents based on the given <code>field</code> and <code>text</code>.</p>
</div>
          <div class="ctx">
            <h3>Client.prototype.delete()</h3>
          </div>
          <div class="tags">
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; String &#125;</span><span class="name">field</span><span class="desc"></span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; String &#125;</span><span class="name">text</span><span class="desc"></span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Object &#125;</span><span class="name">[options]</span><span class="desc"></span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Function &#125;</span><span class="name">callback(err,obj)</span><span class="desc">- a function executed when the Solr server responds or an error occurs</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Error &#125;</span><span class="name">callback().err</span><span class="desc"></span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Object &#125;</span><span class="name">callback().obj</span><span class="desc">- JSON response sent by the Solr server deserialized</span></div>
            <div class="tag"><span class="type">&#64;return</span><span class="desc">http.ClientRequest</span></div>
            <div class="tag"><span class="type">&#64;api</span><span class="visibility">public</span></div>
          </div>
          <div class="description"></div>
          <div class="view-source">Hide Source</div>
          <div class="code-wrap">
            <pre class="source prettyprint"><code>Client.prototype.delete = function(field,text,options,callback) {
   if(typeof(options) === 'function'){
      callback = options;
      options = {};
   }
   text = format.dateISOify(text);
   var data = {
      'delete' :  {
         query : field +  ':'  + format.escapeSpecialChars(text)
      }
   };
   return this.update(data,options,callback);
}</code></pre>
          </div>
        </article>
        <article class="codeblock">
          <div class="header"><p>Delete a range of documents based on the given <code>field</code>, <code>start</code> and <code>stop</code> arguments.</p>
</div>
          <div class="ctx">
            <h3>Client.prototype.deleteByRange()</h3>
          </div>
          <div class="tags">
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; String &#125;</span><span class="name">field</span><span class="desc"></span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; String | Date &#125;</span><span class="name">start</span><span class="desc"></span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; String | Date &#125;</span><span class="name">stop</span><span class="desc"></span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Function &#125;</span><span class="name">callback(err,obj)</span><span class="desc">- a function executed when the Solr server responds or an error occurs</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Error &#125;</span><span class="name">callback().err</span><span class="desc"></span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Object &#125;</span><span class="name">callback().obj</span><span class="desc">- JSON response sent by the Solr server deserialized</span></div>
            <div class="tag"><span class="type">&#64;return</span><span class="desc">http.ClientRequest</span></div>
            <div class="tag"><span class="type">&#64;api</span><span class="visibility">public</span></div>
          </div>
          <div class="description"></div>
          <div class="view-source">Hide Source</div>
          <div class="code-wrap">
            <pre class="source prettyprint"><code>Client.prototype.deleteByRange = function(field,start,stop,options,callback){
   if(typeof(options) === 'function'){
      callback = options;
      options = {};
   }
   start = format.dateISOify(start);
   stop = format.dateISOify(stop);

   var query = field + ':[' + start + ' TO ' + stop + ']';
   return this.deleteByQuery(query,options,callback);
}</code></pre>
          </div>
        </article>
        <article class="codeblock">
          <div class="header"><p>Delete the document with the given <code>id</code></p>
</div>
          <div class="ctx">
            <h3>Client.prototype.deleteByID()</h3>
          </div>
          <div class="tags">
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; String | Number &#125;</span><span class="name">id</span><span class="desc">- id of the document you want to delete</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Object &#125;</span><span class="name">[options]</span><span class="desc">-</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Function &#125;</span><span class="name">callback(err,obj)</span><span class="desc">- a function executed when the Solr server responds or an error occurs</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Error &#125;</span><span class="name">callback().err</span><span class="desc"></span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Object &#125;</span><span class="name">callback().obj</span><span class="desc">- JSON response sent by the Solr server deserialized</span></div>
            <div class="tag"><span class="type">&#64;return</span><span class="desc">http.ClientRequest</span></div>
            <div class="tag"><span class="type">&#64;api</span><span class="visibility">public</span></div>
          </div>
          <div class="description"></div>
          <div class="view-source">Hide Source</div>
          <div class="code-wrap">
            <pre class="source prettyprint"><code>Client.prototype.deleteByID = function(id,options,callback){
   if(typeof(options) === 'function'){
      callback = options;
      options = {};
   }
   var data = {
      'delete' : {
         id : id
      }
   };
   return this.update(data,options,callback);
}</code></pre>
          </div>
        </article>
        <article class="codeblock">
          <div class="header"><p>Delete documents matching the given <code>query</code></p>
</div>
          <div class="ctx">
            <h3>Client.prototype.deleteByQuery()</h3>
          </div>
          <div class="tags">
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; String &#125;</span><span class="name">query</span><span class="desc">-</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Object &#125;</span><span class="name">[options]</span><span class="desc">-</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Function &#125;</span><span class="name">callback(err,obj)</span><span class="desc">- a function executed when the Solr server responds or an error occurs</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Error &#125;</span><span class="name">callback().err</span><span class="desc"></span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Object &#125;</span><span class="name">callback().obj</span><span class="desc">- JSON response sent by the Solr server deserialized</span></div>
            <div class="tag"><span class="type">&#64;return</span><span class="desc">http.ClientRequest</span></div>
            <div class="tag"><span class="type">&#64;api</span><span class="visibility">public</span></div>
          </div>
          <div class="description"></div>
          <div class="view-source">Hide Source</div>
          <div class="code-wrap">
            <pre class="source prettyprint"><code>Client.prototype.deleteByQuery = function(query,options,callback){
   if(typeof(options) === 'function'){
      callback = options;
      options = {};
   }
   var data = {
      'delete' : {
         query : query
      }
   };
   return this.update(data,options,callback);
}</code></pre>
          </div>
        </article>
        <article class="codeblock">
          <div class="header"><p>Delete all documents</p>
</div>
          <div class="ctx">
            <h3>Client.prototype.deleteAll()</h3>
          </div>
          <div class="tags">
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Object &#125;</span><span class="name">[options]</span><span class="desc">-</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Function &#125;</span><span class="name">callback(err,obj)</span><span class="desc">- a function executed when the Solr server responds or an error occurs</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Error &#125;</span><span class="name">callback().err</span><span class="desc"></span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Object &#125;</span><span class="name">callback().obj</span><span class="desc">- JSON response sent by the Solr server deserialized</span></div>
            <div class="tag"><span class="type">&#64;return</span><span class="desc">http.ClientRequest</span></div>
            <div class="tag"><span class="type">&#64;api</span><span class="visibility">public</span></div>
          </div>
          <div class="description"></div>
          <div class="view-source">Hide Source</div>
          <div class="code-wrap">
            <pre class="source prettyprint"><code>Client.prototype.deleteAll = function(options,callback){
   return this.deleteByQuery('*:*',options,callback);
}</code></pre>
          </div>
        </article>
        <article class="codeblock">
          <div class="header"><p>Optimize the index</p>
</div>
          <div class="ctx">
            <h3>Client.prototype.optimize()</h3>
          </div>
          <div class="tags">
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Object &#125;</span><span class="name">options</span><span class="desc">-</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Function &#125;</span><span class="name">callback(err,obj)</span><span class="desc">- a function executed when the Solr server responds or an error occurs</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Error &#125;</span><span class="name">callback().err</span><span class="desc"></span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Object &#125;</span><span class="name">callback().obj</span><span class="desc">- JSON response sent by the Solr server deserialized</span></div>
            <div class="tag"><span class="type">&#64;return</span><span class="desc">http.ClientRequest</span></div>
            <div class="tag"><span class="type">&#64;api</span><span class="visibility">public</span></div>
          </div>
          <div class="description"></div>
          <div class="view-source">Hide Source</div>
          <div class="code-wrap">
            <pre class="source prettyprint"><code>Client.prototype.optimize = function(options,callback){
   if(typeof(options) === 'function'){
      callback = options;
      options = {};
   }
   var data = {
      optimize : options || {}
   };
   return this.update(data,callback);
}</code></pre>
          </div>
        </article>
        <article class="codeblock">
          <div class="header"><p>Rollback all add/delete commands made since the last commit.</p>
</div>
          <div class="ctx">
            <h3>Client.prototype.rollback()</h3>
          </div>
          <div class="tags">
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Function &#125;</span><span class="name">callback(err,obj)</span><span class="desc">- a function executed when the Solr server responds or an error occurs</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Error &#125;</span><span class="name">callback().err</span><span class="desc"></span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Object &#125;</span><span class="name">callback().obj</span><span class="desc">- JSON response sent by the Solr server deserialized</span></div>
            <div class="tag"><span class="type">&#64;return</span><span class="desc">http.ClientRequest</span></div>
            <div class="tag"><span class="type">&#64;api</span><span class="visibility">public</span></div>
          </div>
          <div class="description"></div>
          <div class="view-source">Hide Source</div>
          <div class="code-wrap">
            <pre class="source prettyprint"><code>Client.prototype.rollback = function(callback){
   var data = {
      rollback : {}
   };
   return this.update(data,callback);
}</code></pre>
          </div>
        </article>
        <article class="codeblock">
          <div class="header"><p>Send an update command to the Solr server with the given <code>data</code> stringified in the body.</p>
</div>
          <div class="ctx">
            <h3>Client.prototype.update()</h3>
          </div>
          <div class="tags">
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Object &#125;</span><span class="name">data</span><span class="desc">- data sent to the Solr server</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Object &#125;</span><span class="name">[options]</span><span class="desc">-</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Function &#125;</span><span class="name">callback(err,obj)</span><span class="desc">- a function executed when the Solr server responds or an error occurs</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Error &#125;</span><span class="name">callback().err</span><span class="desc"></span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Object &#125;</span><span class="name">callback().obj</span><span class="desc">- JSON response sent by the Solr server deserialized</span></div>
            <div class="tag"><span class="type">&#64;return</span><span class="desc">http.ClientRequest</span></div>
            <div class="tag"><span class="type">&#64;api</span><span class="visibility">private</span></div>
          </div>
          <div class="description"></div>
          <div class="view-source">Hide Source</div>
          <div class="code-wrap">
            <pre class="source prettyprint"><code>Client.prototype.update = function(data,options,callback){
   if(typeof(options) === 'function'){
      callback = options;
      options = {};
   }

   var json = pickJSON(this.options.bigint).stringify(data);
   var fullPath = [this.options.path,this.options.core, this.UPDATE_JSON_HANDLER + '?' + querystring.stringify(options) +'&amp;wt=json']
                              .filter(function(element){
                                 return element;
                              })
                              .join('/');

   var params = {
      host : this.options.host,
      port : this.options.port,
      fullPath : fullPath,
      json : json,
      secure : this.options.secure,
      bigint : this.options.bigint,
      authorization : this.options.authorization,
      agent : this.options.agent
   };
   return postJSON(params,callback);
}</code></pre>
          </div>
        </article>
        <article class="codeblock">
          <div class="header"><p>Search documents matching the <code>query</code></p>
</div>
          <div class="ctx">
            <h3>Client.prototype.search()</h3>
          </div>
          <div class="tags">
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Query | Object | String &#125;</span><span class="name">query</span><span class="desc"></span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Function &#125;</span><span class="name">callback(err,obj)</span><span class="desc">- a function executed when the Solr server responds or an error occurs</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Error &#125;</span><span class="name">callback().err</span><span class="desc"></span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Object &#125;</span><span class="name">callback().obj</span><span class="desc">- JSON response sent by the Solr server deserialized</span></div>
            <div class="tag"><span class="type">&#64;return</span><span class="desc">http.ClientRequest</span></div>
            <div class="tag"><span class="type">&#64;api</span><span class="visibility">public</span></div>
          </div>
          <div class="description"></div>
          <div class="view-source">Hide Source</div>
          <div class="code-wrap">
            <pre class="source prettyprint"><code>Client.prototype.search = function(query,callback){
   return this.get(this.SELECT_HANDLER, query, callback);
}</code></pre>
          </div>
        </article>
        <article class="codeblock">
          <div class="header"><p>Search for all documents</p>
</div>
          <div class="ctx">
            <h3>Client.prototype.searchAll()</h3>
          </div>
          <div class="tags">
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Function &#125;</span><span class="name">callback(err,obj)</span><span class="desc">- a function executed when the Solr server responds or an error occurs</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Error &#125;</span><span class="name">callback().err</span><span class="desc"></span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Object &#125;</span><span class="name">callback().obj</span><span class="desc">- JSON response sent by the Solr server deserialized</span></div>
            <div class="tag"><span class="type">&#64;return</span><span class="desc">http.ClientRequest</span></div>
            <div class="tag"><span class="type">&#64;api</span><span class="visibility">public</span></div>
          </div>
          <div class="description"></div>
          <div class="view-source">Hide Source</div>
          <div class="code-wrap">
            <pre class="source prettyprint"><code>Client.prototype.searchAll = function(callback){
   return this.search('q=*', callback);
}</code></pre>
          </div>
        </article>
        <article class="codeblock">
          <div class="header"><p>Search documents matching the <code>query</code></p>
</div>
          <div class="ctx">
            <h3>Client.prototype.spell()</h3>
          </div>
          <div class="tags">
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Query | Object | String &#125;</span><span class="name">query</span><span class="desc"></span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Function &#125;</span><span class="name">callback(err,obj)</span><span class="desc">- a function executed when the Solr server responds or an error occurs</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Error &#125;</span><span class="name">callback().err</span><span class="desc"></span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Object &#125;</span><span class="name">callback().obj</span><span class="desc">- JSON response sent by the Solr server deserialized</span></div>
            <div class="tag"><span class="type">&#64;return</span><span class="desc">http.ClientRequest</span></div>
            <div class="tag"><span class="type">&#64;api</span><span class="visibility">public</span></div>
          </div>
          <div class="description"><p>Spellcheck is also enabled.</p>
</div>
          <div class="view-source">Hide Source</div>
          <div class="code-wrap">
            <pre class="source prettyprint"><code>Client.prototype.spell = function(query,callback){
   return this.get(this.SPELL_HANDLER, query, callback);
}</code></pre>
          </div>
        </article>
        <article class="codeblock">
          <div class="header"><p>Send an arbitrary HTTP GET request to Solr on the specified <code>handler</code> (as Solr like to call it i.e path)</p>
</div>
          <div class="ctx">
            <h3>Client.prototype.get()</h3>
          </div>
          <div class="tags">
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; String &#125;</span><span class="name">handler</span><span class="desc"></span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Query | Object | String &#125;</span><span class="name">[query]</span><span class="desc"></span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Function &#125;</span><span class="name">callback(err,obj)</span><span class="desc">- a function executed when the Solr server responds or an error occurs</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Error &#125;</span><span class="name">callback().err</span><span class="desc"></span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Object &#125;</span><span class="name">callback().obj</span><span class="desc">- JSON response sent by the Solr server deserialized</span></div>
            <div class="tag"><span class="type">&#64;return</span><span class="desc">http.ClientRequest</span></div>
            <div class="tag"><span class="type">&#64;api</span><span class="visibility">public</span></div>
          </div>
          <div class="description"></div>
          <div class="view-source">Hide Source</div>
          <div class="code-wrap">
            <pre class="source prettyprint"><code>Client.prototype.get = function(handler,query,callback){

   var parameters = '';
   if(typeof query === 'function'){
      callback = query;
   }else if(query instanceof Query){
      parameters += query.build();
   }else if(typeof query === 'object'){
      parameters += querystring.stringify(query);
   }else if(typeof query === 'string'){
      parameters += query;
   }

   var fullPath = [this.options.path,this.options.core,handler + '?' + parameters + '&amp;wt=json']
                              .filter(function(element){
                                 return element;
                              })
                              .join('/');

   var params = {
      host : this.options.host,
      port : this.options.port,
      fullPath : fullPath,
      secure : this.options.secure,
      bigint : this.options.bigint,
      authorization : this.options.authorization,
      agent : this.options.agent
   };
   return getJSON(params,callback);
}</code></pre>
          </div>
        </article>
        <article class="codeblock">
          <div class="header"><p>Create an instance of <code>Query</code></p>
</div>
          <div class="ctx">
            <h3>Client.prototype.createQuery()</h3>
          </div>
          <div class="tags">
            <div class="tag"><span class="type">&#64;return</span><span class="desc">Query</span></div>
            <div class="tag"><span class="type">&#64;api</span><span class="visibility">public</span></div>
          </div>
          <div class="description"></div>
          <div class="view-source">Hide Source</div>
          <div class="code-wrap">
            <pre class="source prettyprint"><code>Client.prototype.createQuery = function(){
   return new Query();
}</code></pre>
          </div>
        </article>
        <article class="codeblock">
          <div class="header"><p>Expose <code>format.escapeSpecialChars</code> from <code>Client.escapeSpecialChars</code></p>
</div>
          <div class="ctx">
            <h3>Client.prototypeescapeSpecialChars</h3>
          </div>
          <div class="description"></div>
          <div class="view-source">Hide Source</div>
          <div class="code-wrap">
            <pre class="source prettyprint"><code>Client.prototype.escapeSpecialChars = format.escapeSpecialChars;</code></pre>
          </div>
        </article>
        <article class="codeblock">
          <div class="header"><p>Ping the Solr server</p>
</div>
          <div class="ctx">
            <h3>Client.prototype.ping()</h3>
          </div>
          <div class="tags">
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Function &#125;</span><span class="name">callback(err,obj)</span><span class="desc">- a function executed when the Solr server responds or an error occurs</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Error &#125;</span><span class="name">callback().err</span><span class="desc"></span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Object &#125;</span><span class="name">callback().obj</span><span class="desc">- JSON response sent by the Solr server deserialized</span></div>
            <div class="tag"><span class="type">&#64;return</span><span class="desc">http.ClientRequest</span></div>
            <div class="tag"><span class="type">&#64;api</span><span class="visibility">public</span></div>
          </div>
          <div class="description"></div>
          <div class="view-source">Hide Source</div>
          <div class="code-wrap">
            <pre class="source prettyprint"><code>Client.prototype.ping = function(callback){
   return this.get(this.ADMIN_PING_HANDLER, callback);
}</code></pre>
          </div>
        </article>
        <article class="codeblock">
          <div class="header"><p>Pick appropriate protocol based on the given <code>secure</code> flag</p>
</div>
          <div class="ctx">
            <h3>pickProtocol()</h3>
          </div>
          <div class="tags">
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Boolean &#125;</span><span class="name">secure</span><span class="desc">-</span></div>
            <div class="tag"><span class="type">&#64;return</span><span class="desc">Object</span></div>
            <div class="tag"><span class="type">&#64;api</span><span class="visibility">private</span></div>
          </div>
          <div class="description"></div>
          <div class="view-source">Hide Source</div>
          <div class="code-wrap">
            <pre class="source prettyprint"><code>function pickProtocol(secure){
   return secure ? https : http;
};</code></pre>
          </div>
        </article>
        <article class="codeblock">
          <div class="header"><p>Pick appropriate JSON serializer/deserializer library based on the given <code>bigint</code> flag</p>
</div>
          <div class="ctx">
            <h3>pickJSON()</h3>
          </div>
          <div class="tags">
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Boolean &#125;</span><span class="name">bigint</span><span class="desc">- whenever to handle big number correctly or not (the reason for not using JSONbig all the times is it has an important performance cost)</span></div>
            <div class="tag"><span class="type">&#64;return</span><span class="desc">Object</span></div>
            <div class="tag"><span class="type">&#64;api</span><span class="visibility">private</span></div>
          </div>
          <div class="description"></div>
          <div class="view-source">Hide Source</div>
          <div class="code-wrap">
            <pre class="source prettyprint"><code>function pickJSON(bigint){
   return bigint ? JSONbig : JSON;
};</code></pre>
          </div>
        </article>
        <article class="codeblock">
          <div class="header"><p>HTTP POST request. Send update commands to the Solr server (commit, add, delete, optimize)</p>
</div>
          <div class="ctx">
            <h3>postJSON()</h3>
          </div>
          <div class="tags">
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Object &#125;</span><span class="name">params</span><span class="desc"></span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; String &#125;</span><span class="name">params.host</span><span class="desc">- IP address or host address of the Solr server</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Number | String &#125;</span><span class="name">params.port</span><span class="desc">- port of the Solr server</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; String &#125;</span><span class="name">params.core</span><span class="desc">- name of the Solr core requested</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; String &#125;</span><span class="name">params.authorization</span><span class="desc">- value of the authorization header</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; String &#125;</span><span class="name">params.fullPath</span><span class="desc">- full path of the request</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; String &#125;</span><span class="name">params.json</span><span class="desc">-</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Boolean &#125;</span><span class="name">params.secure</span><span class="desc">-</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Boolean &#125;</span><span class="name">params.bigint</span><span class="desc">-</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; http.Agent &#125;</span><span class="name">[params.agent]</span><span class="desc">-</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Function &#125;</span><span class="name">callback(err,obj)</span><span class="desc">- a function executed when the Solr server responds or an error occurs</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Error &#125;</span><span class="name">callback().err</span><span class="desc"></span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Object &#125;</span><span class="name">callback().obj</span><span class="desc">- JSON response sent by the Solr server deserialized</span></div>
            <div class="tag"><span class="type">&#64;return</span><span class="desc">http.ClientRequest</span></div>
            <div class="tag"><span class="type">&#64;api</span><span class="visibility">private</span></div>
          </div>
          <div class="description"></div>
          <div class="view-source">Hide Source</div>
          <div class="code-wrap">
            <pre class="source prettyprint"><code>function postJSON(params,callback){
   var headers = {
      'content-type' : 'application/json; charset=utf-8',
      'content-length':  Buffer.byteLength(params.json),
      'accept' : 'application/json; charset=utf-8'
   };
   if(params.authorization){
      headers['authorization'] = params.authorization;
   }
   var options = {
      host : params.host,
      port : params.port,
      method : 'POST',
      headers : headers,
      path : params.fullPath
   };

   if(params.agent !== undefined){
      options.agent = params.agent;
   }

   var request = pickProtocol(params.secure).request(options);

   request.on('response', handleJSONResponse(request, params.bigint, callback));

   request.on('error',function onError(err){
      if (callback) callback(err,null);
   });

   request.write(params.json);
   request.end();

   return request;
};</code></pre>
          </div>
        </article>
        <article class="codeblock">
          <div class="header"><p>HTTP GET request.  Send a query command to the Solr server (query)</p>
</div>
          <div class="ctx">
            <h3>getJSON()</h3>
          </div>
          <div class="tags">
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Object &#125;</span><span class="name">params</span><span class="desc"></span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; String &#125;</span><span class="name">params.host</span><span class="desc">- IP address or host address of the Solr server</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Number | String &#125;</span><span class="name">params.port</span><span class="desc">- port of the Solr server</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; String &#125;</span><span class="name">params.core</span><span class="desc">- name of the Solr core requested</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; String &#125;</span><span class="name">params.authorization</span><span class="desc">- value of the authorization header</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; String &#125;</span><span class="name">params.fullPath</span><span class="desc">- full path of the request, contains query parameters</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Boolean &#125;</span><span class="name">params.secure</span><span class="desc">-</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Boolean &#125;</span><span class="name">params.bigint</span><span class="desc">-</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; http.Agent &#125;</span><span class="name">[params.agent]</span><span class="desc">-</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Function &#125;</span><span class="name">callback(err,obj)</span><span class="desc">- a function executed when the Solr server responds or an error occurs</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Error &#125;</span><span class="name">callback().err</span><span class="desc"></span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Object &#125;</span><span class="name">callback().obj</span><span class="desc">- JSON response sent by the Solr server deserialized</span></div>
            <div class="tag"><span class="type">&#64;return</span><span class="desc">http.ClientRequest</span></div>
            <div class="tag"><span class="type">&#64;api</span><span class="visibility">private</span></div>
          </div>
          <div class="description"></div>
          <div class="view-source">Hide Source</div>
          <div class="code-wrap">
            <pre class="source prettyprint"><code>function getJSON(params,callback){
   var headers = {
      'accept' : 'application/json; charset=utf-8'
   };
   var options = {
      host : params.host,
      port : params.port,
      path : params.fullPath,
      headers : headers
   };

   if(params.agent !== undefined){
      options.agent = params.agent;
   }

    if(params.authorization){
      var headers = {
         'authorization' : params.authorization
      };
      options.headers = headers;
   }

   var request = pickProtocol(params.secure).get(options);

   request.on('response', handleJSONResponse(request, params.bigint, callback));

   request.on('error',function(err){
      if (callback) callback(err,null);
   });
   return request;
};</code></pre>
          </div>
        </article>
        <article class="codeblock">
          <div class="header"><p>Handle HTTP JSON response from Solr</p>
</div>
          <div class="ctx">
            <h3>handleJSONResponse()</h3>
          </div>
          <div class="tags">
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Function &#125;</span><span class="name">callback(err,obj)</span><span class="desc">- a function executed when the Solr server responds or an error occurs</span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Error &#125;</span><span class="name">callback().err</span><span class="desc"></span></div>
            <div class="tag"><span class="type">&#64;param</span><span class="types">&#123; Object &#125;</span><span class="name">callback().obj</span><span class="desc">- JSON response sent by the Solr server deserialized</span></div>
            <div class="tag"><span class="type">&#64;api</span><span class="visibility">private</span></div>
          </div>
          <div class="description"></div>
          <div class="view-source">Hide Source</div>
          <div class="code-wrap">
            <pre class="source prettyprint"><code>function handleJSONResponse(request, bigint, callback){
   return function onJSONResponse(response){
      var text = '';
      var err = null;
      var data = null;

      // This properly handles multi-byte characters
      response.setEncoding('utf-8');

      response.on('data',function(chunk){
         text += chunk;
      });

      response.on('end',function(){
         if(response.statusCode &lt; 200 || response.statusCode &gt; 299){
            err = new SolrError(request,response,text);
            if(callback)  callback(err,null);
         }else{
            try{
               data = pickJSON(bigint).parse(text);
            }catch(error){
               err = error;
            }finally{
               if(callback)  callback(err,data);
            }
         }
      });
   };
};</code></pre>
          </div>
        </article>
      </div>
    </section>
    <footer>
      <div class="branding">
        Solr client for node.js&nbsp;
        . site generated by<a href="http://codexjs.com">codex.</a>
      </div>
    </footer>
  </body>
</html>